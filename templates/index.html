<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credrit Card Fraud Detection</title>
    <link rel="stylesheet" href="../static/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script> <!-- PapaParse for CSV parsing -->
</head>
<body>
    <header>
        <h1> Credit Card Fraud Detection </h1>
    
    <!-- Embed the map -->
    
    </header>
    <link rel="stylesheet" href="../static/styles.css"> <!-- Link to styles.css -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script> <!-- PapaParse for CSV parsing -->
    <script src="../js/Data_read.js" defer></script> 
    <script src="../js/Fraud_Alert.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    



</head>
<body>



    <div class="main-container">
        <!-- Left Side -->
        <div class="left-container">
            <div class="search-section">
                <input type="text" id="search" placeholder="Search for a person..." oninput="filterNames()">
            </div>
            <div id="search-results" class="search-results"></div>
            <div id="card-details" class="card-details"></div>
        </div>
    
        <!-- Middle Container: Map -->
        <div class="right-container">
            <iframe src="../static/user_map.html" width="95%" height="750px"></iframe>
            
        </div>
        <div id="charts-container">
            <canvas id="transactionsChart"></canvas>
            <canvas id="locationChart"></canvas>
        </div>
    <!-- <script src="../js/Fraud_Alert.js" defer></script> Link to external JavaScript file -->

    <script>
        // Function to load and parse the CSV file directly from the static folder
        window.onload = function() {
            fetch('../static/Merged_card_user.csv')  // Path to the CSV file in the static folder
                .then(response => response.text())
                .then(csvData => {
                    // Use PapaParse to parse the CSV data
                    Papa.parse(csvData, {
                        complete: function(results) {
                            console.log('Parsed CSV:', results);
                            displayCSVData(results.data); // Display parsed data
                        },
                        header: true // Set to true if the first row contains headers
                    });
                })
                .catch(error => {
                    console.error('Error loading CSV:', error);
                });
        };

        // Function to display CSV data as a table
        
    </script>
</body>
</html>